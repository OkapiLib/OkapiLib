<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Filtering | OkapiLib A PROS library for programming VEX robots</title>
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="okapi-docs.css" />
  <link rel="icon" href="logo-doxygen.jpeg" type="image/jpeg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">OkapiLib <span class="m-thin">A PROS library for programming VEX robots</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="md_docs_tutorials_index.html">Tutorials</a></li>
            <li>
              <a href="md_docs_api_index.html">API</a>
              <ol>
                <li><a href="md_docs_api_chassis.html">Chassis API</a></li>
                <li><a href="md_docs_api_control.html">Control API</a></li>
                <li><a href="md_docs_api_devices.html">Devices API</a></li>
                <li><a href="md_docs_api_filters.html">Filters API</a></li>
                <li><a href="md_docs_api_units.html">Units API</a></li>
                <li><a href="md_docs_api_utility.html">Utility API</a></li>
              </ol>
            </li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          Filtering
        </h1>
<p>OkapiLib makes it easy to use any one of a number of various types of filters on sensors and controllers. The specifics of how each filter works and should be initialized will be left to its API reference, but this guide will help provide the general knowledge necessary to make the most out of OkapiLib&#x27;s filtering functionality.</p><h3>Filtering Generic Sensor Input</h3><p>It&#x27;s possible with OkapiLib to filter any value that you want, which makes it easy to filter sensors. The example below gives an example of filtering a sensor value.</p><pre class="m-code"><span class="k">const</span> <span class="kt">int</span> <span class="n">POTENTIOMETER_PORT</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">NUM_AVE_POINTS</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="n">Potentiometer</span> <span class="nf">exampleSensor</span><span class="p">(</span><span class="n">POTENTIOMETER_PORT</span><span class="p">);</span>
<span class="n">AverageFilter</span><span class="o">&lt;</span><span class="n">NUM_AVE_POINTS</span><span class="o">&gt;</span> <span class="n">exampleFilter</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">opcontrol</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Current Sensor Reading: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">exampleFilter</span><span class="p">.</span><span class="n">filter</span><span class="p">(</span><span class="n">exampleSensor</span><span class="p">.</span><span class="n">get</span><span class="p">());</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></pre><p>The above example will print out the average of the last five readings of the potentiometer.</p><h3>Adding a Filter to a Controller</h3><p>Velocity PID Controllers often benefit from filtering the velocity reading. As a result, it is possible to pass in a filter as an argument to the constructor for a Velocity PID Controller. Note -- filtering will not have a positive impact on position PID movements, and is not supported as a result.</p><p>Using a filter with a velocity PID Controller can be done in the following manner:</p><pre class="m-code"><span class="k">const</span> <span class="kt">double</span> <span class="n">kP</span> <span class="o">=</span> <span class="mf">0.001</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">kD</span> <span class="o">=</span> <span class="mf">0.0001</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">kF</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">double</span> <span class="n">kSF</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">NUM_AVE_POINTS</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>

<span class="k">auto</span> <span class="n">exampleController</span> <span class="o">=</span> <span class="n">IterativeControllerFactory</span><span class="o">::</span><span class="n">velPID</span><span class="p">(</span>
                           <span class="n">kP</span><span class="p">,</span> <span class="n">kD</span><span class="p">,</span> <span class="n">kF</span><span class="p">,</span> <span class="n">kSF</span><span class="p">,</span>
                           <span class="n">VelMathFactory</span><span class="o">::</span><span class="n">createPtr</span><span class="p">(</span>
                             <span class="n">imev5GreenTPR</span><span class="p">,</span>
                             <span class="n">std</span><span class="o">::</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">AverageFilter</span><span class="o">&lt;</span><span class="n">NUM_AVE_POINTS</span><span class="o">&gt;&gt;</span><span class="p">()</span>
                           <span class="p">)</span>
                         <span class="p">);</span>

<span class="kt">void</span> <span class="nf">opcontrol</span><span class="p">()</span> <span class="p">{</span>
<span class="p">}</span></pre><p>This will create a velocity PID controller which uses an <a href="classokapi_1_1AverageFilter.html" class="m-doc">AverageFilter</a>.</p>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>OkapiLib A PROS library for programming VEX robots. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
